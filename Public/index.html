<!DOCTYPE html>
<html ng-app="musicApp">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,900' rel='stylesheet' type='text/css'>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <base href="/"></base>
  </head>
  <body ng-controller="YouTubeController">

    <header>
      <h1 id="logo">Playlist</h1>
      <form id="search" ng-submit="getSearch(field); toggleResults()" ng-controller="SearchController">
        <input id="search-input" ng-model="field" type="text" placeholder="Search YouTube Music Videos" autocomplete="off">
        <input id="search-submit" type="image" src="search.png">
        <search-directive show='showResults' width='750px' height='60%'>
          <div id="results">
            <div class="video" ng-cloak ng-repeat="result in searchList track by $index" ng-click="enqueue(result)">
              <img clas="video-image" src={{result.snippet.thumbnails.default.url}}>
              <p class="video-title">{{result.snippet.title}}</p>
              <p class="video-author">{{result.snippet.channelTitle}}</p>
              <p class="video-description">{{result.snippet.description}}</p>
            </div>
          </div>
        </search-directive>
      </form>
      <h1 id="skip" ng-click="skip()">skip</h1>
      <input id="volume" min ="0" max="100" step="1" type="range" ng-model="volume"</input>
    </header>
      <div class="container">
        <div id="player-queue">
          <div id="player"></div>
          <div id="queue">

            <div id="current-song">
              <p ng-cloak ng-show="current.title">{{ current.username }} is playing {{ current.title }}</p>
              <p ng-click="upCount()">UP</p>
              <p ng-cloak>{{upcount}}</p>
              <p ng-click="downCount()">DOWN</p>
              <p ng-cloak>{{downcount}}</p>
            </div>

            <div class="pending-songs" ng-cloak ng-repeat="song in list track by $index">
              <p id="queue-title" ng-cloak>{{ song.title }}</p>
              <p id="queue-remove" ng-cloak type="button" ng-click="dequeue(song)">Remove</p>
            </div>

          </div>
        </div>

                <div id="chat" ng-controller="ChatController">
                  <div id="chat-container" scroll-directive="messages" ng-model="messages">
                    <table class="chat-table">
                      <thead>
                        <tr id="chat-header">
                          <th>
                            <span ng-style="chatstyle" class="tab" ng-click="changetab('chat')">Chat</span>
                            <span ng-style="userstyle" class="tab" ng-click="changetab('users')">Users</span>
                          </th>
                        </tr>
                      </thead>
                      <tbody ng-show="tab=='chat'" id="messages" ng-repeat="message in messages track by $index">
                        <tr class="user-name">
                          <td ng-cloak ng-show="messages[{{$index-1}}].username !== message.username"><strong>{{ message.username }}  </strong>{{ message.time }}</td>
                        </tr>
                        <tr class="user-message">
                          <td ng-cloak ng-bind-html="message.message | linky:'_blank'">{{ message.message }}</td>
                        </tr>
                      </tbody>
                      <tbody id="messages" ng-show="tab=='users'">
                        <tr class="user-name" ng-repeat="user in useronline">
                          <td ng-cloak ><strong>{{user}}</strong></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                    <form id="chat-submit" ng-submit="send(message)">
                      <input id="chat-input" ng-model="message" type="text" placeholder="Enter Message" autocomplete="off" required/>
                    </form>
                </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.0-rc.2/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-sanitize.js"></script>
    <script src="chat.js"></script>
    <script src="search.js"></script>
    <script src="music.js"></script>
  </body>
</html>



