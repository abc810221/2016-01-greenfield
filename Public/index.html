<!DOCTYPE html>
<html ng-app="musicApp">
  <head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert-dev.js"></script>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,900' rel='stylesheet' type='text/css'>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <base href="/"></base>
  </head>
  <body ng-controller="YouTubeController">

    <header>
      <h1 id="logo">Playlist</h1>
      <form id="search" ng-submit="getSearch(field); toggleResults()" ng-controller="SearchController">
        <input id="search-input" ng-model="field" type="text" placeholder="Search YouTube Music Videos" autocomplete="off">
        <input id="search-submit" type="image" src="search.png">
        <search-directive show='showResults' width='750px' height='62%'>
          <div id="results">
            <div class="video" ng-cloak ng-repeat="result in searchList track by $index" ng-click="enqueue(result)">
              <img clas="video-image" style="float:left" src={{result.snippet.thumbnails.default.url}}>
              <span style="display: block;" class="video-title">{{result.snippet.title| limitTo: 75 }}{{result.snippet.description.length > 75 ? '...' : ''}}</span>
              <span style="display: block;" class="video-author">{{result.snippet.channelTitle}}</span>
              <span class="video-description">{{result.snippet.description | limitTo: 160 }}{{result.snippet.description.length > 160 ? '...' : ''}}</span>
            </div>
          </div>
        </search-directive>
      </form>
      <h1 id="skip" ng-click="skip()">skip</h1>
      <input id="volume" min ="0" max="100" step="1" type="range" ng-model="volume"</input>
    </header>
      <div class="container">
      <div id="player-queue">
        <div id="player"></div>


        <div id="current-song">
          <span style="padding-top:5px; float:left;" ng-cloak ng-show="!current.title">Add a video to the queue</span>
          <span ng-cloak ng-show="current.title">{{ current.username }} is playing {{ current.title | limitTo: 50 }}{{current.title.length > 50 ? '...' : ''}}</span>

        </div>
        <div class="votes">
            <img src="upvote.svg" style="display: inline-block;" onmouseover="this.src='uphover.svg';" onmouseout="this.src='upvote.svg';" class="up-arrow" ng-click="upCount()"></img>
            <p style="display: inline-block; color: white" class="vote-count" ng-cloak>{{upcount}}</p>
            <img style="display: inline-block;" src="downvote.svg" onmouseover="this.src='downhover.svg';" onmouseout="this.src='downvote.svg';" class="down-arrow" ng-click="downCount()"></img>
            <p style="display: inline-block; color: white" class="vote-count" ng-cloak>{{downcount}}</p>
        </div>

        <div id="queue">
          <div class="pending-songs" ng-cloak ng-repeat="song in list track by $index">
            <p id="queue-title" ng-cloak>{{ song.title | limitTo: 80 }}{{song.title.length > 79 ? '...' : ''}}</p>
            <p id="queue-remove" ng-cloak type="button" ng-click="dequeue(song)">Remove</p>
          </div>
        </div>
      </div>

        <div id="chat" ng-controller="ChatController">
          <div style="position:fixed;">
                <li ng-style="chatstyle" class="tab" ng-click="changetab('chat')">Chat
                <li ng-style="userstyle" class="tab" ng-click="changetab('users')">Users</li>
          </div>
          <div id="chat-container" scroll-directive="messages" ng-model="messages">
            <table class="chat-table" style="margin-top:20px">

              <tbody ng-show="tab=='chat'" id="messages" ng-repeat="message in messages track by $index">
                <tr class="user-name">
                  <td ng-cloak ng-show="messages[{{$index-1}}].username !== message.username"><strong>{{ message.username }} </strong><span class="time">{{message.time}}</td>
                </tr>
                <tr class="user-message">
                  <td ng-cloak ng-bind-html="message.message | linky:'_blank'">{{ message.message }}</td>
                </tr>
              </tbody>

              <tbody id="messages" ng-show="tab=='users'">
                <tr class="user-name" ng-repeat="user in useronline">
                  <td ng-cloak ><strong>{{user}}</strong></td>
                </tr>
              </tbody>
            </table>

          </div>
            <form id="chat-submit" ng-submit="send(message)">
              <input id="chat-input" ng-model="message" type="text" placeholder="Enter Message" autocomplete="off" required/>
            </form>
        </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.0-rc.2/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-sanitize.js"></script>
    <script src="chat.js"></script>
    <script src="search.js"></script>
    <script src="music.js"></script>
  </body>
</html>



